# 故事式语句模块

这是一个群聊机器人模块，用于触发生成"故事式语句"。

## 功能说明

该模块根据预设的词库，在群聊中识别特定关键词并自动拼装成故事式语句，格式为：「谁」+「在哪」+「怎么样地」+「干什么」。

### 触发条件

只需要在消息中包含「谁」分类中的任意关键词，就会触发生成故事式语句。机器人会从消息中提取其他三类关键词（如果有的话），对于缺失的部分会自动随机选择补充。

## 使用指南

### 查看帮助
```
故事帮助
```

### 词库管理

#### 添加关键词
```
添加 who 张三
添加 where 厕所
添加 how 激动地
添加 what 敲代码
```

#### 删除关键词
```
删除 who 张三
删除 where 厕所
```

#### 查看当前词库
```
查看词库
```

### 测试命令

#### 随机生成故事
```
故事测试
```

#### 强制触发故事生成
```
强制触发 张三在厕所
```

#### 自定义模板（新增功能）
```
#T /who/在/where//how//what/
#T 今天我看到/who/正在/where//how//what/
```

### 触发示例

当有人在群里发送包含「谁」关键词的消息时，如：
```
张三
```

机器人会自动识别并随机补充其他部分，回复类似：
```
【触发】张三在厕所若无其事地吃泡面。
```

如果消息中同时包含其他类别的关键词，会优先使用这些已有的关键词：
```
张三在厕所做什么
```

机器人可能回复：
```
【触发】张三在厕所若无其事地敲代码。
```

使用自定义模板可以更灵活地创建故事：
```
#T 听说/who/昨天/how/在/where//what/
```

机器人可能回复：
```
【自定义】听说小红昨天激动地在办公室拍桌子。
```

## 分类说明

模块使用英文分类名称，对应关系如下：
- who（谁）：张三、小红、隔壁老王等
- where（在哪）：厕所、办公室、火锅店等
- how（怎么样地）：若无其事地、激动地、偷偷地等
- what（干什么）：吃泡面、拍桌子、敲代码等

## 注意事项

1. 词库会自动保存在插件的data/story/keywords文件中
2. 默认情况下任何人都可以管理词库，如需限制权限，请取消代码中权限检查部分的注释
3. 如果想要添加更多的关键词分类，需要修改代码 